{"ast":null,"code":"import _regeneratorRuntime from\"/Users/AmundFremming/Documents/Personlig/Koding/web-frontend/drikkelek/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/AmundFremming/Documents/Personlig/Koding/web-frontend/drikkelek/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/AmundFremming/Documents/Personlig/Koding/web-frontend/drikkelek/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/AmundFremming/Documents/Personlig/Koding/web-frontend/drikkelek/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Header from\"../Base/Header\";import Navbar from\"../Base/Navbar\";import{db}from\"../config/firebase\";import{getDocs,collection}from\"firebase/firestore\";/*\n    Fikse problem\n        - bruke setTimeput\n        - spm kommer ikke pga de kalles rett etter de skal bli henta med async funksjon, spå de finnes ikke ends\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PlayGame=function PlayGame(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),numQuestions=_useState2[0],setNumQuestions=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),numAsked=_useState4[0],setNumAsked=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),spak=_useState6[0],setSpak=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),question=_useState8[0],setQuestion=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),questions=_useState10[0],setQuestions=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allQuestions=_useState12[0],setAllQuestions=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),names=_useState14[0],setNames=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),allNames=_useState16[0],setAllNames=_useState16[1];var namesCollectionRef=collection(db,\"names\");var questionsCollectionRef=collection(db,\"questions\");var getQuestionsAndNames=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var questionsData,filteredQuestionsData,namesData,filteredNamesData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDocs(questionsCollectionRef);case 3:questionsData=_context.sent;filteredQuestionsData=questionsData.docs.map(function(doc){return _objectSpread({},doc.data());});setAllQuestions(filteredQuestionsData);// Gets and sets the names\n_context.next=8;return getDocs(namesCollectionRef);case 8:namesData=_context.sent;filteredNamesData=namesData.docs.map(function(doc){return _objectSpread({},doc.data());});setAllNames(filteredNamesData);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function getQuestionsAndNames(){return _ref.apply(this,arguments);};}();var setRoomQuestions=function setRoomQuestions(){var roomID=localStorage.getItem(\"gameID\");var roomQuestions=[];allQuestions.forEach(function(question){if(question.gameid===roomID){roomQuestions.push(question.question);}});setQuestions(roomQuestions);setNumQuestions(roomQuestions.length);};var setRoomNames=function setRoomNames(){var roomID=localStorage.getItem(\"gameID\");var roomNames=[];allNames.forEach(function(name){if(name.gameid===roomID){roomNames.push(name.name);}});setNames(roomNames);};useEffect(function(){getQuestionsAndNames();},[]);useEffect(function(){setRoomQuestions();setRoomNames();},[spak]);var handleClick=function handleClick(){if(spak){setSpak(false);}console.log(names);console.log(questions);var randomQuestion=questions[Math.floor(Math.random()*questions.length)];setQuestion(randomQuestion);setQuestions(questions.filter(function(question){return question!==randomQuestion;}));if(questions.length==0&&numQuestions!=0){setQuestion(\"Spillet er ferdig\");}else{if(numAsked!=0){setNumAsked(numAsked+1);}else{}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-24 justify-center items-center flex\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"beer guy\",src:require('../img/beerguy.png'),className:\"w-72\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-center items-center flex mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-72 w-80 bg-violet-500 rounded shadow-xl justify-center flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-col justify-center\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-white text-2xl text-center mt-4\",children:[\"Question \",numAsked,\"/\",numQuestions]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{id:\"q\",className:\"text-black text-xl mt-4 text-center\",children:[\"\\\"\",question,\"\\\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"justify-center items-center flex\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"bg-blue-300 m-4 rounded-xl h-12 w-32 justify-center items-center flex shadow-xl hover:bg-blue-400 mt-20 text-violet-900\",children:\"Next\"})})]})})}),/*#__PURE__*/_jsx(Navbar,{})]});};export default PlayGame;","map":{"version":3,"names":["React","useState","useEffect","Header","Navbar","db","getDocs","collection","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PlayGame","props","_useState","_useState2","_slicedToArray","numQuestions","setNumQuestions","_useState3","_useState4","numAsked","setNumAsked","_useState5","_useState6","spak","setSpak","_useState7","_useState8","question","setQuestion","_useState9","_useState10","questions","setQuestions","_useState11","_useState12","allQuestions","setAllQuestions","_useState13","_useState14","names","setNames","_useState15","_useState16","allNames","setAllNames","namesCollectionRef","questionsCollectionRef","getQuestionsAndNames","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","questionsData","filteredQuestionsData","namesData","filteredNamesData","wrap","_callee$","_context","prev","next","sent","docs","map","doc","_objectSpread","data","t0","console","log","stop","apply","arguments","setRoomQuestions","roomID","localStorage","getItem","roomQuestions","forEach","gameid","push","length","setRoomNames","roomNames","name","handleClick","randomQuestion","Math","floor","random","filter","children","className","alt","src","require","id","onClick"],"sources":["/Users/AmundFremming/Documents/Personlig/Koding/web-frontend/drikkelek/src/pages/PlayGame.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../Base/Header\";\nimport Navbar from \"../Base/Navbar\";\nimport { db } from \"../config/firebase\";\nimport { getDocs, collection } from \"firebase/firestore\";\n\n/*\n    Fikse problem\n        - bruke setTimeput\n        - spm kommer ikke pga de kalles rett etter de skal bli henta med async funksjon, spå de finnes ikke ends\n*/\n\nconst PlayGame = (props) => {\n\n    const [numQuestions, setNumQuestions] = useState(0);\n    const [numAsked, setNumAsked] = useState(0);\n    const [spak, setSpak] = useState(true);\n    const [question, setQuestion] = useState(\"\");\n    const [questions, setQuestions] = useState([]);\n    const [allQuestions, setAllQuestions] = useState([]);\n    const [names, setNames] = useState([]);\n    const [allNames, setAllNames] = useState([]);\n\n    const namesCollectionRef = collection(db, \"names\");\n    const questionsCollectionRef = collection(db, \"questions\");\n\n    const getQuestionsAndNames = async () => {\n        try {\n            // Gets and sets the questions\n            const questionsData = await getDocs(questionsCollectionRef);\n            const filteredQuestionsData = questionsData.docs.map(doc => ({...doc.data()}));\n            \n            setAllQuestions(filteredQuestionsData);\n\n            // Gets and sets the names\n            const namesData = await getDocs(namesCollectionRef);\n            const filteredNamesData = namesData.docs.map(doc => ({...doc.data()}));\n\n            setAllNames(filteredNamesData);\n\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    const setRoomQuestions = () => {\n        const roomID = localStorage.getItem(\"gameID\");\n        \n        const roomQuestions = [];\n        allQuestions.forEach(question => {\n            if(question.gameid === roomID) {\n                roomQuestions.push(question.question);\n            }\n        });\n        setQuestions(roomQuestions);\n        setNumQuestions(roomQuestions.length);\n    }\n\n    const setRoomNames = () => {\n\n        const roomID = localStorage.getItem(\"gameID\");\n\n        const roomNames = [];\n        allNames.forEach(name => {\n            if(name.gameid === roomID) {\n                roomNames.push(name.name);\n            }\n        });\n        setNames(roomNames);\n    }\n\n    useEffect(() => {\n        getQuestionsAndNames();\n    }, []);\n\n    useEffect(() => {\n        setRoomQuestions();\n        setRoomNames();\n    }, [spak]);\n\n    const handleClick = () => {\n        if(spak) {\n            setSpak(false);\n        }\n\n        console.log(names);\n        console.log(questions);\n\n        const randomQuestion = questions[Math.floor(Math.random() * questions.length)];\n        setQuestion(randomQuestion);\n        setQuestions(questions.filter(question => question !== randomQuestion));\n\n        if(questions.length == 0 && numQuestions != 0) {\n            setQuestion(\"Spillet er ferdig\");\n        } else {\n            if(numAsked != 0) {\n                setNumAsked(numAsked + 1);\n            } else {\n                \n            }\n        }\n    }\n\n    return(\n        <>\n            <Header />\n\n            <div className=\"mt-24 justify-center items-center flex\">\n                <img alt=\"beer guy\" src={require('../img/beerguy.png')} className='w-72'/>    \n            </div>\n\n            <div className=\"justify-center items-center flex mt-6\">\n                <div className=\"h-72 w-80 bg-violet-500 rounded shadow-xl justify-center flex\">\n                    <div className=\"flex-col justify-center\">\n                        <h1 className=\"text-white text-2xl text-center mt-4\">Question {numAsked}/{numQuestions}</h1><br/>\n                        <p id=\"q\" className=\"text-black text-xl mt-4 text-center\">\"{question}\"</p>\n                        \n                        <div className=\"justify-center items-center flex\">\n                            <button onClick={handleClick} className=\"bg-blue-300 m-4 rounded-xl h-12 w-32 justify-center items-center flex shadow-xl hover:bg-blue-400 mt-20 text-violet-900\">Next</button>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n\n            <Navbar />\n        </>\n    );\n}\n\nexport default PlayGame;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}